version: v1.0
name: Initial Pipeline
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
blocks:
  - name: Build
    task:
      jobs:
        - name: Build
          commands:
            - checkout
            - 'ls -alh '
            - 'docker pull --quiet cloudfoundry/cnb:cflinuxfs3'
            - >-
              docker run --rm -it -v ${PWD}:/app -w /app -v
              $(pwd)/layers:/layers cloudfoundry/cnb:cflinuxfs3
              /lifecycle/detector -app=/app -group=/layers/group.toml
              -plan=/layers/plan.toml
